<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>登录</title>
    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/login.css">
</head>
<body>
    <div class="box">
        <img src="index-img/t1.jpg" alt="" class="logo">
        <p><a href="#" class="active">凡客诚品账号登录</a><span>|</span><a href="#">手机验证码登录</a></p>
        <input type="text" placeholder="邮箱/手机号/用户名" autocomplete="off" id="user">
        <input type="password" placeholder="密码为6-16个字符" autocomplete="off" id="pass">
        <span class="span" style="display:block;text-align:center;"></span>
        <input type="button" class="btn" value="立即登录" id="btn">
        <div class="other">
            <span>其他方式登录 :&nbsp;&nbsp;&nbsp;</span><a href="#"><img src="index-img/ot.png" alt=""></a>
            <span><a href="reg.html" style="color:red"> 还没有账号？点击注册</a></span>
        </div>
    </div>
    <p>Cqianfdjfd 2007 - 2009 vackd.com  粤ICP备10006213号  ICP精英许可证编号：凡客诚品(北京)科技有限公司 298365</p>
</body>
<script>
    class Login{
        constructor(){
            this.user = document.getElementById("user");
            this.pass = document.getElementById("pass");
            this.btn = document.getElementById("btn");
            this.span = document.querySelector(".span");

            this.init();
            this.getData();
        }
        init(){
            var that = this;
            this.btn.onclick = function(){
                that.yanzheng();
            }
        }
        getData(){
            this.abc = localStorage.getItem("abc");
            // 读取localStorage，如果有就解析成数组，如果没有就给一个空数组，方便操作
            if(this.abc == null){
                this.abc = [];
            }else{
                this.abc = JSON.parse(this.abc)
            }
        }
        yanzheng(){
            for(var i=0;i<this.abc.length;i++){
                if(this.abc[i].user == this.user.value && this.abc[i].pass == this.pass.value){
                    alert("登录成功,点击确认跳转到首页");

                    this.abc[i].onoff = 1;

                    localStorage.setItem("abc",JSON.stringify(this.abc))

                    setTimeout(()=>{
                        location.href = "index.html";
                    },3000)
                    return;
                }
            }
            this.span.innerHTML = "用户名密码不符";
        }
    }


    new Login();
</script>
</html>